<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exemplo de Formulário com sbVue</title>

  <!-- Importando Vue via CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <!-- Estilos básicos para o layout do exemplo -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #ccc;
      padding: 10px;
    }
    th {
      background-color: #f4f4f4;
    }
  </style>
</head>
<body>

  <div id="app">
    <h1>Formulário com Armazenamento de Dados em Array</h1>

    <!-- Formulário gerido pelo sbFormArrayDb -->
    <sb-form zebra-stripe zebra-color-even="#f9f9f9" zebra-color-odd="#e0e0e0">
      
      <!-- Usando sbFormArrayDb para gerenciar dados -->
      <sb-form-array-db :arrayData="meuArray" :itemStructure="itemStructure" log>
        <!-- Linha 1: Nome Completo e Idade -->
        <sb-form-line align-items="center" justify-content="space-between" min-height="50px">
          <sb-input label="Nome Completo" v-model="currentItem.nome" placeholder="Digite seu nome" width-percent="60" log></sb-input>
          <sb-input label="Idade" v-model="currentItem.idade" input-type="number" placeholder="Digite sua idade" width-percent="30" log></sb-input>
        </sb-form-line>

        <!-- Linha 2: E-mail -->
        <sb-form-line align-items="center" justify-content="center" min-height="50px">
          <sb-input label="E-mail" v-model="currentItem.email" input-type="email" placeholder="Digite seu e-mail" width-percent="80" log></sb-input>
        </sb-form-line>

        <!-- Linha 3: Telefone e País -->
        <sb-form-line align-items="center" justify-content="space-between" min-height="50px">
          <sb-input label="Telefone" v-model="currentItem.telefone" input-type="tel" placeholder="(xx) xxxxx-xxxx" width-percent="40" log></sb-input>
          <sb-input label="País" v-model="currentItem.pais" input-type="select" width-percent="50" log>
            <option value="br">Brasil</option>
            <option value="us">Estados Unidos</option>
            <option value="ca">Canadá</option>
            <option value="uk">Reino Unido</option>
          </sb-input>
        </sb-form-line>

        <!-- Linha 4: Botão de Submissão -->
        <sb-form-line align-items="center" justify-content="center" min-height="50px">
          <sb-button label="Salvar" button-type="submit" :width-percent="50" background-color="#28a745" @click="saveItem" log></sb-button>
        </sb-form-line>
      </sb-form-array-db>

      <!-- Tabela para exibir o array de dados -->
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Idade</th>
            <th>E-mail</th>
            <th>Telefone</th>
            <th>País</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(item, index) in meuArray" :key="item.id">
            <td>{{ item.nome }}</td>
            <td>{{ item.idade }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.telefone }}</td>
            <td>{{ item.pais }}</td>
            <td>
              <button @click="editItem(index)">Editar</button>
              <button @click="removeItem(index)">Excluir</button>
            </td>
          </tr>
        </tbody>
      </table>
    </sb-form>
  </div>

  <!-- Script Vue -->
  <script type="module">
    import { sbForm } from '/src/components/sbForm/sbForm.js';
    import { sbFormLine } from '/src/components/sbForm/sbFormLine.js';
    import { sbInput } from '/src/components/sbForm/sbInput.js';
    import { sbButton } from '/src/components/sbForm/sbButton.js';
    import { sbFormArrayDb } from '/src/utils/sbFormArrayDb/sbFormArrayDb.js';

    const app = Vue.createApp({
      components: {
        'sb-form': sbForm,
        'sb-form-line': sbFormLine,
        'sb-input': sbInput,
        'sb-button': sbButton,
        'sb-form-array-db': sbFormArrayDb
      },
      data() {
        return {
          meuArray: [], // Array de dados gerenciado
          itemStructure: {
            nome: '',
            idade: '',
            email: '',
            telefone: '',
            pais: ''
          },
          currentItem: { // Item atual para edição/adicionamento
            nome: '',
            idade: '',
            email: '',
            telefone: '',
            pais: ''
          },
          currentIndex: null
        };
      },
      methods: {
        // Salvar ou editar o item
        saveItem() {
          if (this.currentIndex === null) {
            this.currentItem.id = this.meuArray.length + 1; // Gera ID único
            this.meuArray.push({ ...this.currentItem });
          } else {
            this.meuArray[this.currentIndex] = { ...this.currentItem };
          }
          this.resetForm();
        },
        // Editar um item existente
        editItem(index) {
          this.currentItem = { ...this.meuArray[index] };
          this.currentIndex = index;
        },
        // Remover um item
        removeItem(index) {
          this.meuArray.splice(index, 1);
          this.resetForm();
        },
        // Resetar o formulário
        resetForm() {
          this.currentItem = {
            nome: '',
            idade: '',
            email: '',
            telefone: '',
            pais: ''
          };
          this.currentIndex = null;
        }
      }
    });

    app.mount('#app');
  </script>
</body>
</html>
